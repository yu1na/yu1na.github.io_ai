<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ìˆœë°œë ¥ í…ŒìŠ¤íŠ¸ ê²Œì„</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      font-family: 'Segoe UI', 'Pretendard', -apple-system, sans-serif;
    }

    body {
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(120deg, #667eea 0%, #764ba2 100%);
    }

    #game-container {
      position: relative;
      width: 800px;
      height: 600px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 30px;
      box-shadow: 0 10px 50px rgba(0, 0, 0, 0.3);
      overflow: hidden;
      transition: background 0.3s ease;
    }

    /* ê²Œì„ í™”ë©´ ìƒíƒœë³„ ë°°ê²½ */
    #game-container.waiting {
      background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
    }

    #game-container.signal {
      background: linear-gradient(135deg, #ff4757 0%, #ff6348 100%);
    }

    /* ëª¨ë‹¬ ê³µí†µ ìŠ¤íƒ€ì¼ */
    .modal {
      display: none;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      align-items: center;
      justify-content: center;
      z-index: 100;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: linear-gradient(135deg, #fff, #f5f5f5);
      padding: 50px 60px;
      border-radius: 25px;
      box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
      text-align: center;
      max-width: 500px;
      animation: modalSlideIn 0.3s ease;
    }

    @keyframes modalSlideIn {
      from {
        transform: translateY(-50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .modal-title {
      font-size: 2.5em;
      font-weight: bold;
      margin-bottom: 20px;
      color: #667eea;
    }

    .modal-subtitle {
      font-size: 1.2em;
      color: #7f8c8d;
      margin-bottom: 30px;
    }

    /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .btn {
      font-size: 1.2em;
      padding: 15px 40px;
      border-radius: 15px;
      border: none;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      margin: 10px;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn-primary {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
    }

    .btn-secondary {
      background: #e0e0e0;
      color: #7f8c8d;
    }

    .btn-disabled {
      background: #e0e0e0;
      color: #bbb;
      cursor: not-allowed;
    }

    /* ëª¨ë“œ ì„ íƒ ë²„íŠ¼ */
    .mode-buttons {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin: 30px 0;
    }

    .mode-btn {
      width: 100%;
      padding: 20px;
      font-size: 1.1em;
      border-radius: 15px;
      border: none;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.2s;
    }

    .mode-btn.active {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
      box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
    }

    .mode-btn:not(.active) {
      background: #e0e0e0;
      color: #7f8c8d;
    }

    .mode-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    /* ìµœê³  ê¸°ë¡ í‘œì‹œ */
    .best-record {
      background: rgba(255, 239, 133, 0.3);
      padding: 20px;
      border-radius: 15px;
      margin-top: 20px;
    }

    .best-record-label {
      font-size: 0.9em;
      color: #7f8c8d;
      margin-bottom: 5px;
    }

    .best-record-value {
      font-size: 2em;
      font-weight: bold;
      color: #ff6a88;
      font-family: 'Consolas', monospace;
    }

    /* ê²Œì„ í™”ë©´ */
    #game-screen {
      display: none;
      width: 100%;
      height: 100%;
      position: relative;
      cursor: pointer;
    }

    #game-screen.active {
      display: block;
    }

    /* ìƒë‹¨ ì •ë³´ ë°” */
    .game-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 20px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: #fff;
      font-weight: bold;
      z-index: 10;
    }

    .round-info {
      font-size: 1.2em;
    }

    .game-controls {
      display: flex;
      gap: 10px;
    }

    .game-control-btn {
      background: rgba(255, 255, 255, 0.2);
      padding: 8px 20px;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.2s;
      border: none;
      color: #fff;
      font-weight: bold;
      font-size: 0.95em;
    }

    .game-control-btn:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    /* ì¤‘ì•™ ë©”ì‹œì§€ */
    .center-message {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      color: #fff;
      width: 100%;
      padding: 0 40px;
    }

    .main-text {
      font-size: 4em;
      font-weight: bold;
      margin-bottom: 20px;
      text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      animation: pulse 1.5s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .signal-text {
      font-size: 5em;
      font-weight: bold;
      text-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
      animation: signalPulse 0.5s ease-in-out;
    }

    @keyframes signalPulse {
      0% { transform: scale(0.8); opacity: 0; }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); opacity: 1; }
    }

    .sub-text {
      font-size: 1.1em;
      color: rgba(255, 255, 255, 0.9);
      line-height: 1.6;
    }

    /* ì´ì „ ê¸°ë¡ í‘œì‹œ */
    .records-box {
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.2);
      padding: 20px 40px;
      border-radius: 15px;
      backdrop-filter: blur(10px);
      color: #fff;
      min-width: 300px;
    }

    .records-title {
      font-size: 1em;
      font-weight: bold;
      margin-bottom: 10px;
      text-align: center;
    }

    .record-item {
      font-family: 'Consolas', monospace;
      font-size: 0.95em;
      margin: 5px 0;
      text-align: center;
    }

    /* ê²°ê³¼ í™”ë©´ */
    .result-content {
      padding: 20px;
    }

    .result-title {
      font-size: 2.5em;
      font-weight: bold;
      color: #667eea;
      margin-bottom: 20px;
    }

    .avg-time-label {
      font-size: 1.1em;
      color: #7f8c8d;
      margin-bottom: 10px;
    }

    .avg-time-value {
      font-size: 4em;
      font-weight: bold;
      color: #ff6a88;
      font-family: 'Consolas', monospace;
      margin-bottom: 20px;
      animation: countUp 0.5s ease;
    }

    @keyframes countUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .grade-badge {
      display: inline-block;
      padding: 15px 50px;
      border-radius: 15px;
      font-size: 2em;
      font-weight: bold;
      color: #fff;
      margin: 20px 0;
      animation: gradeAppear 0.5s ease 0.3s both;
    }

    @keyframes gradeAppear {
      from { 
        opacity: 0; 
        transform: scale(0.5) rotate(-10deg); 
      }
      to { 
        opacity: 1; 
        transform: scale(1) rotate(0deg); 
      }
    }

    .grade-S { background: linear-gradient(135deg, #f093fb, #f5576c); }
    .grade-A { background: linear-gradient(135deg, #2ed573, #26de81); }
    .grade-B { background: linear-gradient(135deg, #4facfe, #00f2fe); }
    .grade-C { background: linear-gradient(135deg, #fa709a, #fee140); }
    .grade-D { background: linear-gradient(135deg, #a8a8a8, #7f7f7f); }

    .stars {
      font-size: 2em;
      margin: 10px 0;
    }

    .detailed-records {
      background: rgba(102, 126, 234, 0.1);
      padding: 25px;
      border-radius: 15px;
      margin: 25px 0;
    }

    .detailed-records-title {
      font-size: 1em;
      font-weight: bold;
      color: #2c3e50;
      margin-bottom: 15px;
    }

    .detailed-records-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    .detailed-record-item {
      font-family: 'Consolas', monospace;
      font-size: 0.95em;
      color: #2c3e50;
      text-align: left;
    }

    /* ì—ëŸ¬ ëª¨ë‹¬ */
    .error-modal .modal-content {
      background: linear-gradient(135deg, #fff, #ffe8e8);
    }

    .error-title {
      font-size: 2em;
      font-weight: bold;
      color: #ff4757;
      margin-bottom: 20px;
    }

    .error-message {
      font-size: 1.1em;
      color: #7f8c8d;
      line-height: 1.8;
      margin-bottom: 30px;
    }

    /* ì¼ì‹œì •ì§€ ëª¨ë‹¬ */
    .pause-modal .modal-content {
      background: linear-gradient(135deg, #fff, #e8f4ff);
    }

    .pause-title {
      font-size: 2.5em;
      font-weight: bold;
      color: #667eea;
      margin-bottom: 30px;
    }

    .pause-info {
      font-size: 1.1em;
      color: #7f8c8d;
      margin-bottom: 30px;
      line-height: 1.6;
    }

    /* í´ë¦­ íš¨ê³¼ */
    #game-container.clicked {
      animation: clickFlash 0.3s ease;
    }

    @keyframes clickFlash {
      0% { filter: brightness(1); }
      50% { filter: brightness(1.3); }
      100% { filter: brightness(1); }
    }

    /* ìˆ«ì ìˆœì„œ ëª¨ë“œ */
    .number-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: none;
    }

    .number-container.active {
      display: block;
    }

    .number-item {
      position: absolute;
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8em;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      user-select: none;
    }

    .number-item:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
    }

    .number-item.clicked {
      background: linear-gradient(135deg, #2ed573, #26de81);
      animation: numberPop 0.3s ease;
      pointer-events: none;
    }

    .number-item.wrong {
      background: linear-gradient(135deg, #ff4757, #ff6348);
      animation: shake 0.3s ease;
    }

    @keyframes numberPop {
      0% { transform: scale(1); }
      50% { transform: scale(1.3); }
      100% { transform: scale(0); opacity: 0; }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }

    .number-info {
      position: absolute;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.3);
      padding: 15px 30px;
      border-radius: 15px;
      backdrop-filter: blur(10px);
      color: #fff;
      font-size: 1.2em;
      font-weight: bold;
      z-index: 10;
    }

    /* íƒ€ì´ë° ëª¨ë“œ */
    .timing-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: none;
    }

    .timing-container.active {
      display: block;
    }

    .timing-bar-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 600px;
      height: 80px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 40px;
      overflow: hidden;
      border: 3px solid rgba(255, 255, 255, 0.5);
    }

    .timing-target-zone {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 100%;
      background: rgba(46, 213, 115, 0.5);
      border-left: 3px solid #2ed573;
      border-right: 3px solid #2ed573;
    }

    .timing-bar {
      position: absolute;
      top: 0;
      left: 0;
      width: 40px;
      height: 100%;
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 20px;
      box-shadow: 0 0 20px rgba(102, 126, 234, 0.8);
      animation: moveBar 2s linear infinite;
    }

    @keyframes moveBar {
      0% { left: 0; }
      50% { left: calc(100% - 40px); }
      100% { left: 0; }
    }

    .timing-bar.paused {
      animation-play-state: paused;
    }

    .timing-info {
      position: absolute;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.3);
      padding: 15px 30px;
      border-radius: 15px;
      backdrop-filter: blur(10px);
      color: #fff;
      font-size: 1.2em;
      font-weight: bold;
      z-index: 10;
      text-align: center;
    }

    .timing-score-display {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 4em;
      font-weight: bold;
      color: #fff;
      text-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
      opacity: 0;
      pointer-events: none;
    }

    .timing-score-display.show {
      animation: scoreShow 1s ease;
    }

    @keyframes scoreShow {
      0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
      30% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
      70% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
      100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
    }

    .timing-instruction {
      position: absolute;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%);
      color: #fff;
      font-size: 1.2em;
      text-align: center;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    }

    /* ë°˜ì‘í˜• ë””ìì¸ */
    @media (max-width: 900px) {
      #game-container {
        width: 90vw;
        height: 70vh;
        min-height: 500px;
      }

      .modal-content {
        padding: 30px 40px;
        max-width: 90%;
      }

      .modal-title {
        font-size: 2em;
      }

      .main-text {
        font-size: 3em;
      }

      .signal-text {
        font-size: 4em;
      }

      .avg-time-value {
        font-size: 3em;
      }
    }

    @media (max-width: 600px) {
      #game-container {
        width: 95vw;
        height: 80vh;
      }

      .modal-content {
        padding: 25px 30px;
      }

      .modal-title {
        font-size: 1.8em;
      }

      .btn {
        font-size: 1em;
        padding: 12px 30px;
      }

      .main-text {
        font-size: 2.5em;
      }

      .signal-text {
        font-size: 3.5em;
      }

      .game-header {
        padding: 15px 20px;
      }

      .round-info {
        font-size: 1em;
      }

      .records-box {
        padding: 15px 25px;
        min-width: 250px;
      }
    }
  </style>
</head>
<body>
  <div id="game-container">
    <!-- ì‹œì‘ ëª¨ë‹¬ -->
    <div id="start-modal" class="modal active">
      <div class="modal-content">
        <div class="modal-title">ğŸ¯ ìˆœë°œë ¥ í…ŒìŠ¤íŠ¸</div>
        <div class="modal-subtitle">ë‹¹ì‹ ì˜ ë°˜ì‘ ì†ë„ëŠ”?</div>
        
        <div class="mode-buttons">
          <button class="mode-btn active" data-mode="classic">í´ë˜ì‹ ëª¨ë“œ</button>
          <button class="mode-btn" data-mode="number">ìˆ«ì ìˆœì„œ ëª¨ë“œ</button>
          <button class="mode-btn" data-mode="timing">íƒ€ì´ë° ëª¨ë“œ</button>
        </div>

        <div class="best-record">
          <div class="best-record-label">ìµœê³  ê¸°ë¡</div>
          <div class="best-record-value" id="best-record-display">---</div>
        </div>

        <button class="btn btn-primary" id="start-btn">ê²Œì„ ì‹œì‘</button>
      </div>
    </div>

    <!-- ê²Œì„ í™”ë©´ -->
    <div id="game-screen">
      <div class="game-header">
        <div class="round-info" id="round-info">ë¼ìš´ë“œ: 1/5</div>
        <div class="game-controls">
          <button class="game-control-btn" id="pause-btn">â¸ ì¼ì‹œì •ì§€</button>
          <button class="game-control-btn" id="menu-btn">ğŸ  ë©”ë‰´</button>
          <button class="game-control-btn" id="restart-btn">âŸ³ ì¬ì‹œì‘</button>
        </div>
      </div>

      <div class="center-message" id="center-message">
        <div class="main-text" id="main-text">ì¤€ë¹„...</div>
        <div class="sub-text" id="sub-text">í™”ë©´ì´ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ<br>ë³€í•˜ë©´ í´ë¦­í•˜ì„¸ìš”!</div>
      </div>

      <div class="records-box" id="records-box" style="display: none;">
        <div class="records-title">ì´ì „ ê¸°ë¡:</div>
        <div id="records-list"></div>
      </div>

      <!-- ìˆ«ì ìˆœì„œ ëª¨ë“œ -->
      <div class="number-container" id="number-container">
        <div class="number-info" id="number-info">ë‹¤ìŒ ìˆ«ì: 1</div>
      </div>

      <!-- íƒ€ì´ë° ëª¨ë“œ -->
      <div class="timing-container" id="timing-container">
        <div class="timing-info" id="timing-info">ë¼ìš´ë“œ: 1/10</div>
        <div class="timing-bar-container">
          <div class="timing-target-zone"></div>
          <div class="timing-bar" id="timing-bar"></div>
        </div>
        <div class="timing-score-display" id="timing-score-display">100ì !</div>
        <div class="timing-instruction">ë°”ê°€ ì´ˆë¡ìƒ‰ ì˜ì—­ì— ìˆì„ ë•Œ í´ë¦­í•˜ì„¸ìš”!</div>
      </div>
    </div>

    <!-- ê²°ê³¼ ëª¨ë‹¬ -->
    <div id="result-modal" class="modal">
      <div class="modal-content">
        <div class="result-content">
          <div class="result-title">ê²Œì„ ì™„ë£Œ! ğŸ‰</div>
          <div class="avg-time-label" id="avg-time-label">í‰ê·  ë°˜ì‘ ì†ë„</div>
          <div class="avg-time-value" id="avg-time">---</div>
          
          <div class="grade-badge" id="grade-badge">ë“±ê¸‰: -</div>
          <div class="stars" id="stars">â­â­â­â­â­</div>

          <div class="detailed-records">
            <div class="detailed-records-title">ìƒì„¸ ê¸°ë¡:</div>
            <div class="detailed-records-grid" id="detailed-records"></div>
          </div>

          <div>
            <button class="btn btn-primary" id="retry-btn">ë‹¤ì‹œí•˜ê¸°</button>
            <button class="btn btn-secondary" id="main-btn">ë©”ì¸ìœ¼ë¡œ</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ì—ëŸ¬ ëª¨ë‹¬ -->
    <div id="error-modal" class="modal error-modal">
      <div class="modal-content">
        <div class="error-title">âš ï¸ ë„ˆë¬´ ë¹¨ë¼ìš”!</div>
        <div class="error-message">
          ìƒ‰ìƒì´ ë³€í•˜ê¸° ì „ì—<br>
          í´ë¦­í•˜ì…¨ìŠµë‹ˆë‹¤.<br>
          ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”!
        </div>
        <button class="btn btn-primary" id="error-retry-btn">ë‹¤ì‹œ ì‹œë„</button>
      </div>
    </div>

    <!-- ì¼ì‹œì •ì§€ ëª¨ë‹¬ -->
    <div id="pause-modal" class="modal pause-modal">
      <div class="modal-content">
        <div class="pause-title">â¸ ì¼ì‹œì •ì§€</div>
        <div class="pause-info">
          ê²Œì„ì´ ì¼ì‹œì •ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
          ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
        </div>
        <div>
          <button class="btn btn-primary" id="resume-btn">ê³„ì†í•˜ê¸°</button>
          <button class="btn btn-secondary" id="pause-menu-btn">ë©”ì¸ìœ¼ë¡œ</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ê²Œì„ ìƒíƒœ ê´€ë¦¬
    const gameState = {
      mode: 'classic',
      round: 0,
      maxRounds: 5,
      records: [],
      waiting: false,
      canClick: false,
      startTime: 0,
      waitTimeout: null,
      signalTimeout: null,
      paused: false,
      pausedTime: 0,
      // ìˆ«ì ìˆœì„œ ëª¨ë“œ
      numberCount: 10,
      currentNumber: 1,
      numberStartTime: 0,
      numbers: [],
      // íƒ€ì´ë° ëª¨ë“œ
      timingRound: 0,
      timingMaxRounds: 10,
      timingScores: []
    };

    // DOM ìš”ì†Œ
    const elements = {
      container: document.getElementById('game-container'),
      startModal: document.getElementById('start-modal'),
      gameScreen: document.getElementById('game-screen'),
      resultModal: document.getElementById('result-modal'),
      errorModal: document.getElementById('error-modal'),
      pauseModal: document.getElementById('pause-modal'),
      startBtn: document.getElementById('start-btn'),
      retryBtn: document.getElementById('retry-btn'),
      mainBtn: document.getElementById('main-btn'),
      restartBtn: document.getElementById('restart-btn'),
      pauseBtn: document.getElementById('pause-btn'),
      menuBtn: document.getElementById('menu-btn'),
      resumeBtn: document.getElementById('resume-btn'),
      pauseMenuBtn: document.getElementById('pause-menu-btn'),
      errorRetryBtn: document.getElementById('error-retry-btn'),
      roundInfo: document.getElementById('round-info'),
      centerMessage: document.getElementById('center-message'),
      mainText: document.getElementById('main-text'),
      subText: document.getElementById('sub-text'),
      recordsBox: document.getElementById('records-box'),
      recordsList: document.getElementById('records-list'),
      bestRecordDisplay: document.getElementById('best-record-display'),
      avgTime: document.getElementById('avg-time'),
      avgTimeLabel: document.getElementById('avg-time-label'),
      gradeBadge: document.getElementById('grade-badge'),
      stars: document.getElementById('stars'),
      detailedRecords: document.getElementById('detailed-records'),
      // ìˆ«ì ìˆœì„œ ëª¨ë“œ
      numberContainer: document.getElementById('number-container'),
      numberInfo: document.getElementById('number-info'),
      // íƒ€ì´ë° ëª¨ë“œ
      timingContainer: document.getElementById('timing-container'),
      timingInfo: document.getElementById('timing-info'),
      timingBar: document.getElementById('timing-bar'),
      timingScoreDisplay: document.getElementById('timing-score-display')
    };

    // ëª¨ë“œ ì„ íƒ ë²„íŠ¼
    const modeButtons = document.querySelectorAll('.mode-btn');
    modeButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        modeButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        gameState.mode = btn.dataset.mode;
      });
    });

    // localStorage ê´€ë¦¬
    function getBestRecord() {
      const record = localStorage.getItem('reactionTestBestRecord');
      return record ? parseInt(record) : null;
    }

    function saveBestRecord(time) {
      const current = getBestRecord();
      if (!current || time < current) {
        localStorage.setItem('reactionTestBestRecord', time);
        return true;
      }
      return false;
    }

    function displayBestRecord() {
      const best = getBestRecord();
      elements.bestRecordDisplay.textContent = best ? `${best}ms` : '---';
    }

    // ê²Œì„ ì‹œì‘
    function startGame() {
      gameState.round = 0;
      gameState.records = [];
      gameState.paused = false;
      gameState.waiting = false;
      gameState.canClick = false;
      
      elements.startModal.classList.remove('active');
      elements.gameScreen.classList.add('active');
      
      // ëª¨ë“œë³„ ì´ˆê¸°í™”
      if (gameState.mode === 'classic') {
        elements.centerMessage.style.display = 'block';
        elements.numberContainer.classList.remove('active');
        elements.timingContainer.classList.remove('active');
        startRound();
      } else if (gameState.mode === 'number') {
        elements.centerMessage.style.display = 'none';
        elements.numberContainer.classList.add('active');
        elements.timingContainer.classList.remove('active');
        startNumberMode();
      } else if (gameState.mode === 'timing') {
        elements.centerMessage.style.display = 'none';
        elements.numberContainer.classList.remove('active');
        elements.timingContainer.classList.add('active');
        startTimingMode();
      }
    }

    // ë¼ìš´ë“œ ì‹œì‘
    function startRound() {
      gameState.round++;
      gameState.canClick = false;
      gameState.waiting = true;

      // UI ì—…ë°ì´íŠ¸
      elements.roundInfo.textContent = `ë¼ìš´ë“œ: ${gameState.round}/${gameState.maxRounds}`;
      elements.container.className = 'waiting';
      elements.mainText.textContent = 'ì¤€ë¹„...';
      elements.mainText.className = 'main-text';
      elements.subText.style.display = 'block';
      elements.subText.innerHTML = 'í™”ë©´ì´ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ<br>ë³€í•˜ë©´ í´ë¦­í•˜ì„¸ìš”!';

      // ì´ì „ ê¸°ë¡ í‘œì‹œ
      if (gameState.records.length > 0) {
        elements.recordsBox.style.display = 'block';
        elements.recordsList.innerHTML = gameState.records
          .map((time, idx) => `<div class="record-item">${idx + 1}íšŒ: ${time}ms</div>`)
          .join('');
      }

      // ëœë¤ ëŒ€ê¸° ì‹œê°„ (2-5ì´ˆ)
      const waitTime = 2000 + Math.random() * 3000;
      
      gameState.waitTimeout = setTimeout(() => {
        showSignal();
      }, waitTime);
    }

    // ì‹œì‘ ì‹ í˜¸ í‘œì‹œ
    function showSignal() {
      gameState.waiting = false;
      gameState.canClick = true;
      gameState.startTime = Date.now();

      elements.container.className = 'signal';
      elements.mainText.textContent = 'ì§€ê¸ˆ!!!';
      elements.mainText.className = 'signal-text';
      elements.subText.style.display = 'none';

      // 5ì´ˆ íƒ€ì„ì•„ì›ƒ
      gameState.signalTimeout = setTimeout(() => {
        handleTimeout();
      }, 5000);
    }

    // í´ë¦­ ì²˜ë¦¬
    function handleClick(event) {
      // ì¼ì‹œì •ì§€ ìƒíƒœë©´ ë¬´ì‹œ
      if (gameState.paused) return;

      // íƒ€ì´ë° ëª¨ë“œì¼ ë•Œ
      if (gameState.mode === 'timing' && elements.timingContainer.classList.contains('active')) {
        handleTimingClick();
        return;
      }

      // ìˆ«ì ìˆœì„œ ëª¨ë“œëŠ” ìˆ«ì í´ë¦­ìœ¼ë¡œë§Œ ì²˜ë¦¬
      if (gameState.mode === 'number') {
        return;
      }

      // í´ë˜ì‹ ëª¨ë“œ
      // í´ë¦­ íš¨ê³¼ ì¶”ê°€
      addClickEffect();

      // ëŒ€ê¸° ì¤‘ì¼ ë•Œ í´ë¦­ (ë„ˆë¬´ ë¹ ë¥¸ í´ë¦­)
      if (gameState.waiting) {
        clearTimeout(gameState.waitTimeout);
        showError();
        return;
      }

      // í´ë¦­ ê°€ëŠ¥ ìƒíƒœì¼ ë•Œ
      if (gameState.canClick) {
        const reactionTime = Date.now() - gameState.startTime;
        gameState.canClick = false;
        clearTimeout(gameState.signalTimeout);

        // ê¸°ë¡ ì €ì¥
        gameState.records.push(reactionTime);

        // ë‹¤ìŒ ë¼ìš´ë“œ ë˜ëŠ” ê²°ê³¼ í‘œì‹œ
        if (gameState.round < gameState.maxRounds) {
          setTimeout(() => {
            startRound();
          }, 800);
        } else {
          setTimeout(() => {
            showResult();
          }, 800);
        }
      }
    }

    // í´ë¦­ íš¨ê³¼ ì¶”ê°€
    function addClickEffect() {
      // ë°°ê²½ìƒ‰ ë³€ê²½ íš¨ê³¼
      const colors = [
        'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
        'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
        'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',
        'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',
        'linear-gradient(135deg, #30cfd0 0%, #330867 100%)',
        'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)'
      ];
      
      const randomColor = colors[Math.floor(Math.random() * colors.length)];
      const currentClass = elements.container.className;
      
      // ì„ì‹œë¡œ ë°°ê²½ìƒ‰ ë³€ê²½
      elements.container.style.background = randomColor;
      elements.container.classList.add('clicked');
      
      setTimeout(() => {
        elements.container.classList.remove('clicked');
        // ì›ë˜ ìƒíƒœë¡œ ë³µì›
        if (currentClass.includes('waiting')) {
          elements.container.style.background = '';
        } else if (currentClass.includes('signal')) {
          elements.container.style.background = '';
        }
      }, 300);
    }

    // ì—ëŸ¬ í‘œì‹œ (ë„ˆë¬´ ë¹ ë¥¸ í´ë¦­)
    function showError() {
      elements.errorModal.classList.add('active');
    }

    // ì—ëŸ¬ ëª¨ë‹¬ì—ì„œ ì¬ì‹œë„
    function retryAfterError() {
      elements.errorModal.classList.remove('active');
      startRound();
    }

    // íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬
    function handleTimeout() {
      gameState.canClick = false;
      gameState.records.push(9999);

      if (gameState.round < gameState.maxRounds) {
        elements.mainText.textContent = 'ì‹œê°„ ì´ˆê³¼!';
        setTimeout(() => {
          startRound();
        }, 1500);
      } else {
        setTimeout(() => {
          showResult();
        }, 1500);
      }
    }

    // ê²°ê³¼ í‘œì‹œ
    function showResult() {
      elements.gameScreen.classList.remove('active');
      elements.container.className = '';

      if (gameState.mode === 'classic') {
        showClassicResult();
      } else if (gameState.mode === 'number') {
        showNumberResult();
      } else if (gameState.mode === 'timing') {
        showTimingResult();
      }
    }

    // í´ë˜ì‹ ëª¨ë“œ ê²°ê³¼
    function showClassicResult() {
      // í‰ê·  ê³„ì‚° (9999 ì œì™¸)
      const validRecords = gameState.records.filter(time => time < 9999);
      const avgTime = validRecords.length > 0 
        ? Math.round(validRecords.reduce((a, b) => a + b, 0) / validRecords.length)
        : 9999;

      // ë“±ê¸‰ ê³„ì‚°
      const grade = calculateGrade(avgTime);
      const stars = getStars(grade);

      // UI ì—…ë°ì´íŠ¸
      elements.avgTime.textContent = `${avgTime}ms`;
      elements.avgTimeLabel.textContent = 'í‰ê·  ë°˜ì‘ ì†ë„';
      elements.gradeBadge.textContent = `ë“±ê¸‰: ${grade}`;
      elements.gradeBadge.className = `grade-badge grade-${grade}`;
      elements.stars.textContent = stars;

      // ìƒì„¸ ê¸°ë¡
      elements.detailedRecords.innerHTML = gameState.records
        .map((time, idx) => {
          const displayTime = time === 9999 ? 'ì‹œê°„ì´ˆê³¼' : `${time}ms`;
          return `<div class="detailed-record-item">${idx + 1}íšŒ: ${displayTime}</div>`;
        })
        .join('');

      // ìµœê³  ê¸°ë¡ ì €ì¥
      if (avgTime < 9999) {
        const isNewRecord = saveBestRecord(avgTime);
        if (isNewRecord) {
          displayBestRecord();
        }
      }

      elements.resultModal.classList.add('active');
    }

    // ìˆ«ì ìˆœì„œ ëª¨ë“œ ê²°ê³¼
    function showNumberResult() {
      const totalTime = gameState.records[0];
      const avgTimePerNumber = Math.round(totalTime / gameState.numberCount);

      // ë“±ê¸‰ ê³„ì‚° (ìˆ«ìë‹¹ í‰ê·  ì‹œê°„ ê¸°ì¤€)
      let grade;
      if (avgTimePerNumber < 500) grade = 'S';
      else if (avgTimePerNumber < 700) grade = 'A';
      else if (avgTimePerNumber < 1000) grade = 'B';
      else if (avgTimePerNumber < 1500) grade = 'C';
      else grade = 'D';

      const stars = getStars(grade);

      // UI ì—…ë°ì´íŠ¸
      elements.avgTime.textContent = `${(totalTime / 1000).toFixed(2)}ì´ˆ`;
      elements.avgTimeLabel.textContent = 'ì™„ë£Œ ì‹œê°„';
      elements.gradeBadge.textContent = `ë“±ê¸‰: ${grade}`;
      elements.gradeBadge.className = `grade-badge grade-${grade}`;
      elements.stars.textContent = stars;

      // ìƒì„¸ ê¸°ë¡
      elements.detailedRecords.innerHTML = `
        <div class="detailed-record-item">ì´ ì‹œê°„: ${(totalTime / 1000).toFixed(2)}ì´ˆ</div>
        <div class="detailed-record-item">ìˆ«ì ê°œìˆ˜: ${gameState.numberCount}ê°œ</div>
        <div class="detailed-record-item">í‰ê· : ${avgTimePerNumber}ms/ê°œ</div>
      `;

      elements.resultModal.classList.add('active');
    }

    // íƒ€ì´ë° ëª¨ë“œ ê²°ê³¼
    function showTimingResult() {
      const totalScore = gameState.timingScores.reduce((a, b) => a + b, 0);
      const avgScore = Math.round(totalScore / gameState.timingScores.length);

      // ë“±ê¸‰ ê³„ì‚° (í‰ê·  ì ìˆ˜ ê¸°ì¤€)
      let grade;
      if (avgScore >= 90) grade = 'S';
      else if (avgScore >= 75) grade = 'A';
      else if (avgScore >= 60) grade = 'B';
      else if (avgScore >= 40) grade = 'C';
      else grade = 'D';

      const stars = getStars(grade);

      // UI ì—…ë°ì´íŠ¸
      elements.avgTime.textContent = `${avgScore}ì `;
      elements.avgTimeLabel.textContent = 'í‰ê·  ì •í™•ë„';
      elements.gradeBadge.textContent = `ë“±ê¸‰: ${grade}`;
      elements.gradeBadge.className = `grade-badge grade-${grade}`;
      elements.stars.textContent = stars;

      // ìƒì„¸ ê¸°ë¡
      elements.detailedRecords.innerHTML = gameState.timingScores
        .map((score, idx) => {
          return `<div class="detailed-record-item">${idx + 1}íšŒ: ${score}ì </div>`;
        })
        .join('');

      elements.resultModal.classList.add('active');
    }

    // ë“±ê¸‰ ê³„ì‚°
    function calculateGrade(avgTime) {
      if (avgTime < 200) return 'S';
      if (avgTime < 250) return 'A';
      if (avgTime < 300) return 'B';
      if (avgTime < 400) return 'C';
      return 'D';
    }

    // ë³„ ê°œìˆ˜
    function getStars(grade) {
      const starMap = { 'S': 'â­â­â­â­â­', 'A': 'â­â­â­â­', 'B': 'â­â­â­', 'C': 'â­â­', 'D': 'â­' };
      return starMap[grade] || 'â­';
    }

    // ì¬ì‹œì‘
    function restart() {
      elements.resultModal.classList.remove('active');
      
      // ìˆ«ì ëª¨ë“œ ì •ë¦¬
      const existingNumbers = elements.numberContainer.querySelectorAll('.number-item');
      existingNumbers.forEach(num => num.remove());
      
      // íƒ€ì´ë° ë°” ì •ë¦¬
      elements.timingBar.style.animation = 'none';
      elements.timingBar.classList.remove('paused');
      
      startGame();
    }

    // ë©”ì¸ìœ¼ë¡œ
    function goToMain() {
      elements.resultModal.classList.remove('active');
      elements.gameScreen.classList.remove('active');
      elements.container.className = '';
      elements.startModal.classList.add('active');
      elements.recordsBox.style.display = 'none';
      elements.centerMessage.style.display = 'block';
      elements.numberContainer.classList.remove('active');
      elements.timingContainer.classList.remove('active');
      
      // ìƒíƒœ ì´ˆê¸°í™”
      gameState.paused = false;
      gameState.waiting = false;
      gameState.canClick = false;
      
      // ìˆ«ì ëª¨ë“œ ì •ë¦¬
      const existingNumbers = elements.numberContainer.querySelectorAll('.number-item');
      existingNumbers.forEach(num => num.remove());
      
      // íƒ€ì´ë° ë°” ì •ë¦¬
      elements.timingBar.style.animation = 'none';
      elements.timingBar.classList.remove('paused');
    }

    // ========== ìˆ«ì ìˆœì„œ ëª¨ë“œ ==========
    function startNumberMode() {
      gameState.currentNumber = 1;
      gameState.numberStartTime = Date.now();
      gameState.numbers = [];
      gameState.paused = false;
      
      elements.container.className = 'waiting';
      elements.roundInfo.textContent = `ìˆ«ì ê°œìˆ˜: ${gameState.numberCount}ê°œ`;
      
      // ê¸°ì¡´ ìˆ«ìë“¤ ì œê±°
      const existingNumbers = elements.numberContainer.querySelectorAll('.number-item');
      existingNumbers.forEach(num => num.remove());
      
      // ìˆ«ì ìƒì„±
      for (let i = 1; i <= gameState.numberCount; i++) {
        const number = document.createElement('div');
        number.className = 'number-item';
        number.textContent = i;
        number.dataset.number = i;
        
        // ëœë¤ ìœ„ì¹˜ (ê²¹ì¹˜ì§€ ì•Šê²Œ)
        let x, y, overlapping;
        let attempts = 0;
        do {
          overlapping = false;
          x = 80 + Math.random() * (elements.container.offsetWidth - 160);
          y = 150 + Math.random() * (elements.container.offsetHeight - 250);
          
          // ë‹¤ë¥¸ ìˆ«ìì™€ ê²¹ì¹˜ëŠ”ì§€ í™•ì¸
          for (let existing of gameState.numbers) {
            const dx = x - existing.x;
            const dy = y - existing.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            if (distance < 80) {
              overlapping = true;
              break;
            }
          }
          attempts++;
        } while (overlapping && attempts < 50);
        
        number.style.left = x + 'px';
        number.style.top = y + 'px';
        
        gameState.numbers.push({ x, y, element: number });
        
        number.addEventListener('click', (e) => {
          e.stopPropagation();
          handleNumberClick(parseInt(number.dataset.number), number);
        });
        
        elements.numberContainer.appendChild(number);
      }
      
      updateNumberInfo();
    }

    function handleNumberClick(number, element) {
      if (gameState.paused) return;
      
      if (number === gameState.currentNumber) {
        // ì •ë‹µ
        element.classList.add('clicked');
        gameState.currentNumber++;
        
        if (gameState.currentNumber > gameState.numberCount) {
          // ì™„ë£Œ
          const totalTime = Date.now() - gameState.numberStartTime;
          gameState.records.push(totalTime);
          
          setTimeout(() => {
            showResult();
          }, 500);
        } else {
          updateNumberInfo();
        }
      } else {
        // ì˜¤ë‹µ
        element.classList.add('wrong');
        setTimeout(() => {
          element.classList.remove('wrong');
        }, 300);
      }
    }

    function updateNumberInfo() {
      let numberInfoElement = elements.numberContainer.querySelector('.number-info');
      if (!numberInfoElement) {
        numberInfoElement = document.createElement('div');
        numberInfoElement.className = 'number-info';
        numberInfoElement.id = 'number-info';
        elements.numberContainer.insertBefore(numberInfoElement, elements.numberContainer.firstChild);
      }
      numberInfoElement.textContent = `ë‹¤ìŒ ìˆ«ì: ${gameState.currentNumber}`;
    }

    // ========== íƒ€ì´ë° ëª¨ë“œ ==========
    function startTimingMode() {
      gameState.timingRound = 0;
      gameState.timingScores = [];
      gameState.paused = false;
      
      elements.container.className = 'waiting';
      elements.timingBar.classList.remove('paused');
      startTimingRound();
    }

    function startTimingRound() {
      gameState.timingRound++;
      elements.roundInfo.textContent = `ë¼ìš´ë“œ: ${gameState.timingRound}/${gameState.timingMaxRounds}`;
      elements.timingInfo.textContent = `ë¼ìš´ë“œ: ${gameState.timingRound}/${gameState.timingMaxRounds}`;
      
      // ë°” ì• ë‹ˆë©”ì´ì…˜ ì¬ì‹œì‘
      elements.timingBar.style.animation = 'none';
      elements.timingBar.classList.remove('paused');
      setTimeout(() => {
        if (!gameState.paused) {
          elements.timingBar.style.animation = 'moveBar 2s linear infinite';
        }
      }, 10);
    }

    function handleTimingClick() {
      if (gameState.paused) return;
      
      addClickEffect();
      
      // ë°”ì˜ í˜„ì¬ ìœ„ì¹˜ ê³„ì‚°
      const bar = elements.timingBar;
      const container = bar.parentElement;
      const barRect = bar.getBoundingClientRect();
      const containerRect = container.getBoundingClientRect();
      
      const barCenter = barRect.left + barRect.width / 2 - containerRect.left;
      const containerCenter = containerRect.width / 2;
      const distance = Math.abs(barCenter - containerCenter);
      
      // ì ìˆ˜ ê³„ì‚° (0-100)
      const maxDistance = containerRect.width / 2;
      const score = Math.max(0, Math.round(100 - (distance / maxDistance) * 100));
      
      gameState.timingScores.push(score);
      
      // ì ìˆ˜ í‘œì‹œ
      elements.timingScoreDisplay.textContent = `${score}ì !`;
      elements.timingScoreDisplay.classList.remove('show');
      setTimeout(() => {
        elements.timingScoreDisplay.classList.add('show');
      }, 10);
      
      // ë‹¤ìŒ ë¼ìš´ë“œ ë˜ëŠ” ê²°ê³¼
      if (gameState.timingRound < gameState.timingMaxRounds) {
        setTimeout(() => {
          startTimingRound();
        }, 1000);
      } else {
        setTimeout(() => {
          showResult();
        }, 1500);
      }
    }

    // ê²Œì„ ì¤‘ ì¬ì‹œì‘
    function restartDuringGame() {
      clearTimeout(gameState.waitTimeout);
      clearTimeout(gameState.signalTimeout);
      elements.recordsBox.style.display = 'none';
      gameState.paused = false;
      elements.pauseModal.classList.remove('active');
      
      // ìˆ«ì ëª¨ë“œ ì •ë¦¬
      const existingNumbers = elements.numberContainer.querySelectorAll('.number-item');
      existingNumbers.forEach(num => num.remove());
      
      // íƒ€ì´ë° ë°” ì •ë¦¬
      elements.timingBar.style.animation = 'none';
      elements.timingBar.classList.remove('paused');
      
      startGame();
    }

    // ì¼ì‹œì •ì§€
    function pauseGame() {
      if (gameState.paused) return;
      
      gameState.paused = true;
      gameState.pausedTime = Date.now();
      
      // íƒ€ì´ë¨¸ ì¼ì‹œì •ì§€
      if (gameState.waitTimeout) {
        clearTimeout(gameState.waitTimeout);
      }
      if (gameState.signalTimeout) {
        clearTimeout(gameState.signalTimeout);
      }
      
      // íƒ€ì´ë° ëª¨ë“œ ë°” ì¼ì‹œì •ì§€
      if (gameState.mode === 'timing') {
        elements.timingBar.classList.add('paused');
      }
      
      elements.pauseModal.classList.add('active');
    }

    // ê²Œì„ ì¬ê°œ
    function resumeGame() {
      gameState.paused = false;
      elements.pauseModal.classList.remove('active');
      
      if (gameState.mode === 'classic') {
        // ëŒ€ê¸° ì¤‘ì´ì—ˆë‹¤ë©´ ë‹¤ì‹œ ì‹œì‘
        if (gameState.waiting) {
          startRound();
        }
        // ì‹ í˜¸ í‘œì‹œ ì¤‘ì´ì—ˆë‹¤ë©´ ë‹¤ì‹œ í‘œì‹œ
        else if (gameState.canClick) {
          showSignal();
        }
      } else if (gameState.mode === 'timing') {
        // íƒ€ì´ë° ë°” ì• ë‹ˆë©”ì´ì…˜ ì¬ê°œ
        elements.timingBar.classList.remove('paused');
      }
    }

    // ì¼ì‹œì •ì§€ì—ì„œ ë©”ì¸ìœ¼ë¡œ
    function pauseToMain() {
      clearTimeout(gameState.waitTimeout);
      clearTimeout(gameState.signalTimeout);
      gameState.paused = false;
      elements.pauseModal.classList.remove('active');
      goToMain();
    }

    // ê²Œì„ ì¤‘ ë©”ë‰´ë¡œ
    function goToMenuDuringGame() {
      clearTimeout(gameState.waitTimeout);
      clearTimeout(gameState.signalTimeout);
      gameState.paused = false;
      goToMain();
    }

    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    elements.startBtn.addEventListener('click', startGame);
    elements.retryBtn.addEventListener('click', restart);
    elements.mainBtn.addEventListener('click', goToMain);
    elements.restartBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      restartDuringGame();
    });
    elements.pauseBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      pauseGame();
    });
    elements.menuBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      goToMenuDuringGame();
    });
    elements.resumeBtn.addEventListener('click', resumeGame);
    elements.pauseMenuBtn.addEventListener('click', pauseToMain);
    elements.errorRetryBtn.addEventListener('click', retryAfterError);
    elements.gameScreen.addEventListener('click', handleClick);

    // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
    document.addEventListener('keydown', (e) => {
      if (e.key === 'r' || e.key === 'R') {
        if (elements.resultModal.classList.contains('active')) {
          restart();
        } else if (elements.gameScreen.classList.contains('active') && !gameState.paused) {
          restartDuringGame();
        }
      }
      if (e.key === ' ' || e.key === 'Enter') {
        if (elements.gameScreen.classList.contains('active') && !gameState.paused) {
          handleClick();
        } else if (elements.pauseModal.classList.contains('active')) {
          resumeGame();
        }
      }
      if (e.key === 'Escape') {
        if (elements.gameScreen.classList.contains('active') && !gameState.paused) {
          pauseGame();
        } else if (elements.pauseModal.classList.contains('active')) {
          resumeGame();
        }
      }
      if (e.key === 'p' || e.key === 'P') {
        if (elements.gameScreen.classList.contains('active')) {
          if (gameState.paused) {
            resumeGame();
          } else {
            pauseGame();
          }
        }
      }
    });

    // ì´ˆê¸°í™”
    displayBestRecord();
  </script>
</body>
</html>

